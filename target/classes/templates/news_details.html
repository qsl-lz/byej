<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport"
          content="width=device-width,initial-scale=1.0,maixmum-scale=1.0,minimum-scale=1.0,user-scalable=no">
    <title>新闻资讯详情-景区数据可视化系统</title>
    <link rel="stylesheet" href="https://unpkg.zhimg.com/element-ui/lib/theme-chalk/index.css">
    <link rel="stylesheet" href="static/css/index.css">
    <link rel="stylesheet" href="static/css/jd_details.css">
    <script src="https://unpkg.zhimg.com/vue@2.6.12/dist/vue.js"></script>
    <script src="https://unpkg.zhimg.com/element-ui/lib/index.js"></script>
    <script src="static/js/jquery-2.2.3.min.js"></script>

</head>
<body>
<div id="indexApp">
    <header>
        <div class="header">
            <img src="static/img/icon_logo.png" @click="toIndex"/>
            <div class="topItemList">
                <span @click="curSelect(1)" :class="activeIndex=='首页' ? 'selCur' : ''">首页</span>
                <span :class="activeIndex=='紧急通知' ? 'selCur' : ''" @click="curSelect(2)">紧急通知</span>
            </div>
            <div v-if="userObj.id">
                <div class="my_img">
                    <el-dropdown>
                  <span class="el-dropdown-link">

                        <img v-if="userObj.sex==1" src="static/img/saler.png"/>
                        <img v-else="userObj.sex==2" src="static/img/saler1.png"/><i
                          class="el-icon-arrow-down el-icon--right"></i>
                  </span>
                        <el-dropdown-menu slot="dropdown">
                            <el-dropdown-item><span @click="toCenter">个人中心</span></el-dropdown-item>
                            <el-dropdown-item><span @click="loginOut">退出登录</span></el-dropdown-item>
                        </el-dropdown-menu>
                    </el-dropdown>
                </div>
            </div>
            <div v-else>
                <span @click="loginOut">登录</span>
                <label>|</label>
                <span @click="loginOut">注册</span>
            </div>
        </div>
    </header>
    <div class="top_con">
        <div style="font-size: 22px;color: #333;">{{item.title}}</div>
    </div>
    <div style="font-size: 12px;color: #999999;text-align: center;margin: 15px auto;">{{item.create_time}}</div>
    <div class="summary" style="min-height: 610px;">{{item.content}}
    </div>
    <div style="height: 50px;"></div>
    <footer>
        <div>景区数据可视化系统</div>
        <div>Copyright &copy; 2022</div>
    </footer>

</div>
</body>
<!-- 全局js -->
<script>

    function getQueryString(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
        var r = window.location.search.substr(1).match(reg);
        if (r != null) return unescape(r[2]);
        return null;
    }

    var basePath = "/" + window.location.pathname.split("/")[1];
    var indexApp = new Vue({
        el: "#indexApp",
        data() {
            return {
                activeIndex: '新闻资讯',
                item: {},
                userObj: [],
            }
        },
        created() {
            this.userObj = JSON.parse(localStorage.getItem("webInfo")) || [];
            let id = getQueryString('id');
            if (id) {
                this.getInfo(id);
            } else {
                window.location.href = basePath + "/index";
            }
        },
        mounted() {
        },
        methods: {
            toCenter() {
                window.location.href = basePath + "/center";
            },
            loginOut() {
                window.location.href = basePath + "/login";
                localStorage.removeItem("webInfo")
            },
            toIndex() {
                window.location.href = basePath + "/index";
            },
            curSelect(val) {
                this.activeIndex = val;
                if (val == 1) {
                    window.location.href = basePath + "/index";
                } else if (val == 2) {
                    window.location.href = basePath + "/news";
                } else if (val == 3) {
                    window.location.href = basePath + "/comment";
                }
            },
            getInfo(id) {
                let that = this;
                $.ajax({
                    type: "GET",
                    url: `${basePath}/notice_manage/queryNoticeManageKey`,
                    data: {id},
                    success: function (data) {
                        that.item = data.data[0];
                    }
                })
            },
        }
    })
</script>
</html>
