<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>后台管理</title>
    <link rel="stylesheet" href="https://unpkg.zhimg.com/element-ui/lib/theme-chalk/index.css">
    <link rel="stylesheet" href="static/css/idx_index.css">
</head>
<body>
<div id="indexApp">
    <div class="conItem">
        <div class="conLeft">
<!--            <div class="conTop">后台管理系统</div>-->
            <el-menu :default-active="activeIndex" class="el-menu-vertical-demo" @select="handleSelect"
                     background-color="rgb(48, 65, 86)" text-color="rgb(191, 203, 217)" active-text-color="#ffd04b"
                     style="height: 100%;justify-content: center;display: flex;flex-direction: column;">
                <el-menu-item index="1" @click="toRouter('wel_index',主页)" style="height: 75px;line-height: 75px">
                    <i class="el-icon-s-home"></i>
                    <span slot="title">主页</span>
                </el-menu-item>
                <el-menu-item index="8" @click="toRouter('/app/login_href/idx_region_manage')" style="height: 75px;line-height: 75px">
                    <i class="el-icon-menu"></i>
                    <span slot="title">景区区域管理</span>
                </el-menu-item>
                <el-menu-item index="6" @click="toRouter('/app/login_href/idx_notice_manage')" style="height: 75px;line-height: 75px">
                    <i class="el-icon-menu"></i>
                    <span slot="title">紧急通知</span>
                </el-menu-item>
                <el-menu-item index="7" @click="toRouter('/app/login_href/idx_province_num_manage')" style="height: 75px;line-height: 75px">
                    <i class="el-icon-menu"></i>
                    <span slot="title">游客来源数据</span>
                </el-menu-item>
                <el-menu-item index="3" @click="toRouter('/app/login_href/idx_app_ti_wen')" style="height: 75px;line-height: 75px">
                    <i class="el-icon-menu"></i>
                    <span slot="title">用户体温管理</span>
                </el-menu-item>
                <el-menu-item index="5" @click="toRouter('/app/login_href/idx_app_xing_cheng')" style="height: 75px;line-height: 75px">
                    <i class="el-icon-menu"></i>
                    <span slot="title">用户行程管理</span>
                </el-menu-item>
                <el-menu-item index="4" @click="toRouter('/app/login_href/idx_app_user')" style="height: 75px;line-height: 75px">
                    <i class="el-icon-menu"></i>
                    <span slot="title">用户管理</span>
                </el-menu-item>
                <el-menu-item index="9" @click="toRouter('/app/login_href/idx_sys_user')" style="height: 75px;line-height: 75px">
                    <i class="el-icon-menu"></i>
                    <span slot="title">管理员管理</span>
                </el-menu-item>
            </el-menu>
        </div>
        <div class="conRight">
            <div class="conTopRight">
                <div style="flex-grow: 1;"></div>
                <div class="loginout">你好，{{userObj.NAME}}</div>
                <i class="el-icon-switch-button" @click="loginOut();"></i>
            </div>
            <div v-if="activeIndex==1" class="conIframe"><h1>欢迎使用后台管理系统</h1></div>
            <iframe v-else :src="acticeIframeUrl" :id="acticeIframeUrl" frameborder="0" width="98%" min-width="100%"
                    scrolling="auto" class="conIframe"></iframe>
            <div class="conRightBottom">版权所有 2021</div>
        </div>
    </div>
</div>
</body>
<!-- 全局js -->
<!--<script src="https://unpkg.zhimg.com/vue/dist/vue.js"></script>-->
<script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
<script src="https://unpkg.zhimg.com/element-ui/lib/index.js"></script>
<script src="static/js/jquery-2.2.3.min.js"></script>
<script>
    var basePath = "/" + window.location.pathname.split("/")[1];
    var indexApp = new Vue({
        el: "#indexApp",
        data() {
            return {
                activeIndex: "1",
                acticeIframeUrl: "",
                userObj: {},
                isFullScreenFlag: false,
                curSet: '',
            }
        },
        created() {
            this.userObj = JSON.parse(localStorage.getItem("userInfo"));
        },
        mounted() {
        },
        methods: {
            handleSelect(key, keyPath) {
                console.log(key);
                this.activeIndex = key;
            },
            loginOut() {
                var that = this;
                $.ajax({
                    type: "GET",
                    url: `${basePath}/logout`,
                    data: {},
                    success: function (data) {
                        window.location.href = basePath + "/idx_login";
                        localStorage.removeItem("userInfo")
                    }
                })
            },
            fullScreen() {
                this.isFullScreenFlag = true;
                var docElm = document.documentElement;
                //W3C
                if (docElm.requestFullscreen) {
                    docElm.requestFullscreen();
                }
                //FireFox
                else if (docElm.mozRequestFullScreen) {
                    docElm.mozRequestFullScreen();
                }
                //Chrome等
                else if (docElm.webkitRequestFullScreen) {
                    docElm.webkitRequestFullScreen();
                }
                //IE11
                else if (elem.msRequestFullscreen) {
                    elem.msRequestFullscreen();
                }
            },
            miniScreen() {
                this.isFullScreenFlag = false;
                var el = document;
                var cfs = el.cancelFullScreen || el.webkitCancelFullScreen || el.mozCancelFullScreen || el.exitFullScreen;
                if (typeof cfs != "undefined" && cfs) {
                    cfs.call(el);
                } else if (typeof window.ActiveXObject != "undefined") {
                    //for IE，这里和fullScreen相同，模拟按下F11键退出全屏
                    var wscript = new ActiveXObject("WScript.Shell");
                    if (wscript != null) {
                        wscript.SendKeys("{F11}");
                    }
                }
            },
            toRouter(src, name) {
                this.curSet = name;
                if (src == 'wel_index') {
                } else {
                    this.acticeIframeUrl = src;
                }
            }
        }
    })
</script>
</html>
